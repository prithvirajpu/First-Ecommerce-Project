{% extends 'user_app/base_user.html' %}

{% block title %}Profile - shopKickora{% endblock %}

{% block extra_css %}
<style>
    .sidebar-item {
        transition: all 0.3s ease;
    }
    .sidebar-item:hover {
        background-color: #f1f5f9;
        transform: translateX(4px);
    }
    .sidebar-item.active {
        background-color: #e0f2fe;
        border-right: 3px solid #0ea5e9;
        color: #0369a1;
    }
    .profile-card {
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    }
    .info-item {
        transition: all 0.2s ease;
    }
    .info-item:hover {
        background-color: #f8fafc;
        transform: translateY(-1px);
    }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
        <!-- Sidebar -->
        <div class="lg:w-1/4">
            <div class="bg-white rounded-lg shadow-md p-6">
                <nav class="space-y-2">
                    <a href="" class="sidebar-item active flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="user" class="w-5 h-5"></i>
                        <span class="font-medium">Profile</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="shopping-bag" class="w-5 h-5"></i>
                        <span class="font-medium">Orders</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="wallet" class="w-5 h-5"></i>
                        <span class="font-medium">Wallet</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="map-pin" class="w-5 h-5"></i>
                        <span class="font-medium">Address</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="lock" class="w-5 h-5"></i>
                        <span class="font-medium">Password</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="gift" class="w-5 h-5"></i>
                        <span class="font-medium">Refer & Earn</span>
                    </a>
                    <a href="#" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                        <span class="font-medium">Logout</span>
                    </a>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="lg:w-3/4">
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <!-- Profile Header -->
                <div class="profile-card p-8 text-center">
                    <div class="relative inline-block">
                        <img src="/placeholder.svg?height=120&width=120" alt="Profile Picture" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full mx-auto border-4 border-white shadow-lg object-cover">
                        <button class="absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full shadow-lg hover:bg-blue-700 transition-colors">
                            <i data-lucide="camera" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 mt-4">{{request.user}}</h1>
                    <p class="text-gray-600 mt-2">Member since </p>
                </div>

                <!-- Profile Information -->
                <div class="p-8">
                    <div class="space-y-6">
                        <!-- Full Name -->
                        <div class="info-item p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center space-x-4">
                                <div class="bg-blue-100 p-3 rounded-full">
                                    <i data-lucide="user" class="w-5 h-5 text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <label class="text-sm text-gray-500 font-medium">Full Name</label>
                                    <p class="text-lg font-semibold text-gray-800">request.user</p>
                                </div>
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="info-item p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center space-x-4">
                                <div class="bg-green-100 p-3 rounded-full">
                                    <i data-lucide="mail" class="w-5 h-5 text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <label class="text-sm text-gray-500 font-medium">Email</label>
                                    <p class="text-lg font-semibold text-gray-800">prithvirajpu999@gmail.com</p>
                                </div>
                            </div>
                        </div>

                        <!-- Phone -->
                        <div class="info-item p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center space-x-4">
                                <div class="bg-purple-100 p-3 rounded-full">
                                    <i data-lucide="phone" class="w-5 h-5 text-purple-600"></i>
                                </div>
                                <div class="flex-1">
                                    <label class="text-sm text-gray-500 font-medium">Phone</label>
                                    <p class="text-lg font-semibold text-gray-800">9072513338</p>
                                </div>
                            </div>
                        </div>

                        <!-- Address -->
                        <div class="info-item p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center space-x-4">
                                <div class="bg-orange-100 p-3 rounded-full">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-orange-600"></i>
                                </div>
                                <div class="flex-1">
                                    <label class="text-sm text-gray-500 font-medium">Address</label>
                                    <p class="text-lg text-gray-500 italic">No default address set.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Edit Profile Button -->
                    <div class="mt-8 flex justify-end">
                        <button id="editProfileBtn" class="bg-gray-800 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-900 transition-colors flex items-center space-x-2 shadow-lg">
                            <i data-lucide="edit" class="w-5 h-5"></i>
                            <span>Edit Profile</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit Profile Modal -->
<div id="editProfileModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden">
    <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-gray-800">Edit Profile</h2>
                <button id="closeEditModal" class="text-gray-500 hover:text-gray-700">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            
            <form id="editProfileForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                    <input type="text" id="editFullName" value="prithviraj" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="editEmail" value="prithvirajpu999@gmail.com" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                    <input type="tel" id="editPhone" value="9072513338" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                    <textarea id="editAddress" rows="3" placeholder="Enter your address" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" id="cancelEdit" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors">Cancel</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Edit Profile Modal functionality
    const editProfileBtn = document.getElementById('editProfileBtn');
    const editProfileModal = document.getElementById('editProfileModal');
    const closeEditModal = document.getElementById('closeEditModal');
    const cancelEdit = document.getElementById('cancelEdit');
    const editProfileForm = document.getElementById('editProfileForm');

    // Open modal
    editProfileBtn.addEventListener('click', () => {
        editProfileModal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    });

    // Close modal functions
    function closeModal() {
        editProfileModal.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    closeEditModal.addEventListener('click', closeModal);
    cancelEdit.addEventListener('click', closeModal);

    // Close modal on escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !editProfileModal.classList.contains('hidden')) {
            closeModal();
        }
    });

    // Close modal when clicking outside
    editProfileModal.addEventListener('click', (e) => {
        if (e.target === editProfileModal) {
            closeModal();
        }
    });

    // Handle form submission
    editProfileForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Get form values
        const fullName = document.getElementById('editFullName').value;
        const email = document.getElementById('editEmail').value;
        const phone = document.getElementById('editPhone').value;
        const address = document.getElementById('editAddress').value;

        // Here you would typically send the data to your Django backend
        // For now, we'll just show a success message
        alert('Profile updated successfully!');
        closeModal();
        
        // You can add actual form submission logic here
        // Example: fetch('/update-profile/', { method: 'POST', ... })
    });

    // Sidebar active state management
    const sidebarItems = document.querySelectorAll('.sidebar-item');
    sidebarItems.forEach(item => {
        item.addEventListener('click', (e) => {
            // Remove active class from all items
            sidebarItems.forEach(i => i.classList.remove('active'));
            // Add active class to clicked item
            e.currentTarget.classList.add('active');
        });
    });

    // Initialize Lucide icons
    lucide.createIcons();
</script>
{% endblock %}