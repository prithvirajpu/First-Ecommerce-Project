{% extends 'user_app/base_user.html' %}
{% load static %}
{% block title%}change password - shopKickora{% endblock %} 
{% block extra_css %}
<style>
  .sidebar-item {
    transition: all 0.2s ease;
  }
  .sidebar-item:hover {
    background-color: #f3f4f6;
  }
  .sidebar-item.active {
    background-color: #dbeafe;
    border-right: 3px solid #3b82f6;
  }
</style>
{% endblock %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="flex flex-col lg:flex-row gap-8">
    <!-- Sidebar -->
    <div class="lg:w-1/4">
      <div class="bg-white rounded-lg shadow-md p-6">
        <nav class="space-y-2">
          <a
            href="{% url 'user_profile' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600"
          >
            <i data-lucide="user" class="w-5 h-5"></i>
            <span class="font-medium">Profile</span>
          </a>
          <a
            href="#"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600"
          >
            <i data-lucide="shopping-bag" class="w-5 h-5"></i>
            <span class="font-medium">Orders</span>
          </a>
          <a
            href="#"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600"
          >
            <i data-lucide="wallet" class="w-5 h-5"></i>
            <span class="font-medium">Wallet</span>
          </a>
          <a
            href="{% url 'address_view' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600"
          >
            <i data-lucide="map-pin" class="w-5 h-5"></i>
            <span class="font-medium">Address</span>
          </a>
          <a
            href="#"
            class="sidebar-item active flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600"
          >
            <i data-lucide="lock" class="w-5 h-5"></i>
            <span class="font-medium">Password</span>
          </a>
          <a
            href="{% url 'referal' %}"
            class="sidebar-item flex items-center space-x-3 p-3 rounded-lg text-gray-700 hover:text-blue-600"
          >
            <i data-lucide="gift" class="w-5 h-5"></i>
            <span class="font-medium">Refer & Earn</span>
          </a>
        </nav>
      </div>
    </div>
    <!-- Main Content -->
    <div class="flex-1 p-8">
      <div class="max-w-2xl">
        <h1 class="text-2xl font-semibold text-gray-900 mb-8">
          Change Password
        </h1>

        <form method="post" class="space-y-6">
          {% csrf_token %}
          {% if messages %}
  {% for message in messages %}
    {% if 'change_password' in message.tags %}
      <p class="mt-4 text-sm {% if 'success' in message.tags %}text-green-600{% else %}text-red-600{% endif %}">
        {{ message }}
      </p>
    {% endif %}
  {% endfor %}
{% endif %}

          <!-- Old Password -->
          <div>
    <label for="oldPassword" class="block text-sm font-medium text-gray-700 mb-2">Old Password</label>
    <input 
        type="password" 
        id="oldPassword" 
        name="old_password"
        autocomplete="current-password" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-500"
        required
    >
  

            {% if form.old_password.errors %}
  <p class="text-sm text-red-600">
    {{ form.old_password.errors.0 }}
  </p>
{% endif %}

          </div>

          <!-- New Password -->
          <div>
            <label
              for="newPassword"
              class="block text-sm font-medium text-gray-700 mb-2"
              >New Password</label
            >
            <input
              type="password"
              id="newPassword"
              name="new_password1"
              autocomplete="new-password" 

              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-500"
              required
            />
            {% if form.new_password1.errors %}
            <p class="text-sm text-red-600">
              {{ form.new_password1.errors.0 }}
            </p>
            {% endif %}
          </div>

          <!-- Confirm Password -->
          <div>
            <label
              for="confirmPassword"
              class="block text-sm font-medium text-gray-700 mb-2"
              >Confirm Password</label
            >
            <input
              type="password"
              id="confirmPassword"
              name="new_password2"
               autocomplete="new-password" 

              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-gray-500"
              required
            />
            {% if form.new_password2.errors %}
            <p class="text-sm text-red-600">
              {{ form.new_password2.errors.0 }}
            </p>
            {% endif %}
          </div>

          <!-- Submit Button -->
          <div class="pt-4">
            <button
              type="submit"
              class="bg-black text-white px-6 py-2 rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors"
            >
              Change password
            </button>
          </div>
        </form>

        <!-- Success/Error Messages -->
        
      </div>
    </div>
  </div>
</div>
{% endblock %} 
{% block extra_js %}

<script>
    
    // Sidebar active state management
    const sidebarItems = document.querySelectorAll('.sidebar-item');
    sidebarItems.forEach(item => {
        item.addEventListener('click', (e) => {
            // Remove active class from all items
            sidebarItems.forEach(i => i.classList.remove('active'));
            // Add active class to clicked item
            e.currentTarget.classList.add('active');
        });
    });

    // Initialize Lucide icons
    lucide.createIcons();

    // Auto-fade flash messages after 5 seconds
    setTimeout(() => {
        const messages = document.querySelectorAll('.fade-message');
        messages.forEach(msg => {
            msg.style.transition = 'opacity 1s ease';
            msg.style.opacity = '0';
            setTimeout(() => msg.remove(), 1000); // remove from DOM after fade
        });
    }, 5000); // 5 seconds
</script>
{% endblock %}
